version: '3'

services:
  cache:
    image: redis:5.0.3-alpine
    restart: always
    ports:
      - 6379:6379

  api:
    image: acid-challenge-api:latest
    user: node
    working_dir: /home/node/app
    depends_on:
      - cache
    env_file: .env

  app:
    image: nginx:1.15.8-alpine

  proxy:
    image: traefik:1.7.7-alpine
    restart: always
